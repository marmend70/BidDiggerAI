Riorganizziamo la scelta dei modelli AI sia come schermata utente sia nella sezione "Configurazioni".

L’obiettivo è analizzare i documenti PDF o DOCX di gara (bandi, capitolati, disciplinari, allegati tecnici, altri documenti) attraverso un approccio multi-modello, multi-sezione e a doppio livello di analisi, producendo un output finale strutturato in JSON, completamente coerente con le sezioni della mia applicazione.

L’analisi deve essere eseguita secondo due livelli distinti ma coordinati:

1) Estrazione strutturata (structured)
-individuazione di dati oggettivi, elenchi, parametri, numeri, requisiti, vincoli, criteri, formule, tabelle.
-ricostruzione logica di contenuti anche se frammentati o presenti in tabelle irregolari.
-mapping semantico avanzato per riconoscere concetti equivalenti anche quando il documento usa sinonimi o espressioni diverse dai nomi dei campi del mio JSON.

2) Analisi semantica (analysis)
-interpretazione dei contenuti: rischi, ambiguità, criticità, implicazioni operative, zone grigie, condizioni restrittive, elementi da chiarire.
-valutazione qualitativa dei requisiti, delle clausole, degli SLA, delle penali, dei criteri di valutazione.
-nessuna invenzione. ogni commento deve basarsi sul testo e sulle migliori inferenze ammesse.

L’output atteso è un JSON rigoroso, basato sulle sezioni già definite dalla mia applicazione; ogni sezione contiene sempre due blocchi:

"NomeSezione": {
  "structured": { ... },
  "analysis": { ... }
}


Per garantire precisione e robustezza, il modello deve:

-applicare mapping semantico esteso, riconoscendo automaticamente termini equivalenti (es. “requisiti obbligatori” ↔ “requisiti mandatari”, “penali” ↔ “sanzioni”, “SLA” ↔ “livelli di servizio”).
-normalizzare tutti i contenuti secondo lo schema JSON fornito.
-evitare qualsiasi contenuto non richiesto, testo aggiuntivo o commenti fuori dal JSON.
-restituire esclusivamente JSON valido.

Questo approccio permette di:
-usare un modello veloce per l’estrazione strutturata,
-usare modelli avanzati per l’analisi semantica,
- mantenere piena coerenza con l’interfaccia della mia app,
- raggiungere alta precisione su documenti complessi.

Imposta nella schermata di scelta utente e nella sezione "Configurazioni" l'adozione dei seguenti modelli, rispettivamente per i due tipi di analisi:

ESTRAZIONE STRUTTURATA / STRUCTURED (veloce):
1) Gemini 2.5 Flash
API: gemini-2.5-flash
Pro: rapidissimo, economico, ottimo per parsing e tabelle.
Contro: meno preciso nelle estrazioni complesse.

2) Gemini 2.5 Pro
API: gemini-2.5-pro
Pro: più accurato e stabile, ottima estrazione strutturata.
Contro: più lento e più costoso di Flash.

ANALISI SEMANTICA / SEMANTIC (avanzata):
1) GPT-5
API: gpt-5
Pro: massima precisione semantica, eccellente su gare complesse, rischi, ambiguità.
Contro: costo e latenza elevati.

2) GPT-4.1
API: gpt-4.1
Pro: ottimo compromesso qualità/prezzo, reasoning solido.
Contro: leggermente meno accurato di GPT-5 nei casi più delicati.

3) GPT-5 Mini
API: gpt-5-mini
Pro: veloce, economico, buono per analisi leggere o preliminari.
Contro: meno affidabile per semantica profonda e rischi giuridico-contrattuali.


Queste sono le sezioni (che hai già impostato):

SEZIONI – ISTRUZIONI DETTAGLIATE, RULESET E MAPPING SEMANTICO


1. Sintesi Gara
Structured – informazioni da estrarre

denominazione ufficiale della procedura

oggetto dell’appalto, finalità e perimetro del servizio

amministrazione aggiudicatrice / stazione appaltante

area territoriale / luogo di esecuzione

tipologia di appalto (servizi, ICT, multilotto, global service, ecc.)

riferimenti normativi principali (D.Lgs. 36/2023, linee guida ANAC, altri rimandi)

elenco dei documenti posti a base di gara (disciplinare, capitolato, allegati tecnici, schemi offerta, ecc.)

Mapping semantico

Interpreta come "titolo/oggetto" anche:

“scopo dell’appalto”, “descrizione del servizio”, “finalità della procedura”, “ambito del servizio”.

Interpreta come "ente appaltante":

“amministrazione aggiudicatrice”, “committente”, “ente affidante”, “SA”.

Analysis – cosa produrre

quadro sintetico dell’intera procedura

obiettivi funzionali e strategici dell'appalto

indicatori principali che caratterizzano la gara

elementi di contesto da comunicare al team di offerta

2. Checklist Amministrativa
Structured

documentazione amministrativa richiesta (Dich. ex art. 94–98 Codice Appalti, DGUE, PASSOE, ecc.)

modulistica obbligatoria (allegati predisposti dalla SA)

formati e requisiti formali (PDF/A, firma digitale CAdES/PAdES, ecc.)

modalità e canali di trasmissione (portale telematico, PEC, ecc.)

eventuali prescrizioni di impaginazione o modalità di caricamento documenti

Mapping semantico

Ricondurre a "documentazione amministrativa":

“busta A”, “documentazione di ammissione”, “documenti per la verifica dei requisiti”, “documenti di gara”.

Analysis

punti critici che possono comportare esclusione

rischi formali frequenti (firma, formato file, omissioni, caricamenti incompleti)

attenzione sui documenti che richiedono coerenza tra loro

3. Requisiti di Partecipazione
Structured

requisiti generali (assenza cause di esclusione, regolarità fiscale e contributiva, antimafia)

requisiti economico-finanziari (fatturato specifico, capitale minimo, copertura assicurativa, rating d’impresa)

requisiti tecnico-professionali (servizi analoghi, esperienze pregresse, personale qualificato, attrezzature)

certificazioni obbligatorie (ISO 9001, ISO 27001, ISO 20000, ecc.)

ulteriori adempimenti normativi (GDPR, sicurezza, tracciabilità, anticorruzione)

Mapping semantico

“Requisito obbligatorio” comprende anche:

“requisito mandatario”, “inderogabile”, “condizione minima”, “prescrizione di ammissione”, “requisito necessario”.

Analysis

requisiti particolarmente stringenti

rischi di esclusione per operatori non perfettamente conformi

punti che necessitano interpretazione o chiarimento

4. Scadenze
Structured

termine ultimo di presentazione dell’offerta (data e ora)

eventuale obbligo di sopralluogo e relative scadenze

termine per la presentazione dei quesiti

data entro cui la SA risponderà

durata contrattuale complessiva e decorrenza

Mapping

“Scadenze” include anche:

“cronoprogramma di gara”, “timeline procedurale”, “fasi temporali”.

Analysis

tempistiche critiche

scadenze troppo ravvicinate

rischi organizzativi interni per la preparazione dell’offerta

5. Quadro Economico
Structured

importo complessivo dell’appalto

importo annuo, se pluriennale

oneri per la sicurezza (interferenze e specifici)

opzioni e proroghe

valore massimo potenziale del contratto

aliquota IVA di riferimento

Mapping

“Importo complessivo” ≈

“massimale di gara”, “valore stimato”, “base d’asta”.

Analysis

rischi economici impliciti o non evidenziati

margini potenzialmente compressi

clausole economiche che influenzano la redditività

6. CCNL e Clausola Sociale
Structured

CCNL da applicare

presenza e contenuto della clausola sociale

obblighi di riassorbimento del personale

eventuali vincoli su livelli e inquadramenti

prescrizioni sul mantenimento delle condizioni economiche

Mapping

“Clausola sociale” include:

“tutela occupazionale”, “riassorbimento risorse”, “transizione del personale in continuità”.

Analysis

rischio economico e organizzativo

impatti sul costo del lavoro

rigidità nella gestione delle risorse

7. Dettaglio Servizi
Structured

descrizione puntuale delle attività richieste

ambito di applicazione e servizi inclusi

volumi, indicatori, utenza

orari e turnazioni

requisiti infrastrutturali e tecnologici minimi

Mapping

“Dettaglio servizi” include:

“scope”, “campo di applicazione”, “perimetro del servizio”.

Analysis

complessità operative

aree ad alto impatto sul dimensionamento

margini di miglioramento tecnico

8. Durata e Tempistiche
Structured

durata contrattuale

fase di start-up

milestone principali

piani di transizione o subentro

Mapping

“Inizio attività” ≈ “avvio operativo”, “messa in esercizio”, “go-live”.

Analysis

rischi nella gestione della fase di avvio

tempistiche critiche per organizzazione e personale

rigidità del cronoprogramma imposto

9. Oneri e Costi
Structured

oneri a carico dell’appaltatore

oneri a carico della SA

costi non ribaltabili

costi obbligatori ulteriori (es. canoni software, assicurazioni obbligatorie)

Mapping

“Oneri” include:

“obblighi economici”, “costi vincolati”, “spese non negoziabili”.

Analysis

costi a rischio

elementi di costo strutturalmente rigidi

rischi di esposizione economica non coperti

10. Remunerazione
Structured

modello remunerativo (canone fisso, prezzi unitari, pay-per-use, ecc.)

tariffe, listini, voci economiche richieste

canoni fissi

meccanismi di revisione prezzi

sistemi di premialità / malus

Mapping

“Remunerazione” ≈

“corrispettivo”, “compenso”, “tariffario”, “prezzi unitari”.

Analysis

sostenibilità del modello economico

criticità dei meccanismi di revisione

rischi su marginalità

11. SLA e Penali
Structured

SLA richiesti

KPI di monitoraggio

modalità di misurazione e verifica

penali associate

massimali e soglie

condizioni di attivazione penali

Mapping

“SLA” ≈ “livelli di servizio”, “standard di qualità”.
“Penali” ≈ “malus”, “deduzioni”, “sanzioni economiche”.

Analysis

SLA eccessivamente onerosi

penali sproporzionate o cumulative

ambiguità nei metodi di verifica e misurazione

12. Offerta Tecnica
Structured

contenuti richiesti per l’offerta tecnica

limiti dimensionali e formali

elaborati obbligatori

proposte migliorative richieste o ammesse

Mapping

"Offerta tecnica" ≈

“progetto tecnico”, “relazione tecnica”, “proposta progettuale”.

Analysis

fattori critici per ottenere punteggio

aree strategiche su cui concentrare la progettazione

opportunità di innovazione

13. Offerta Economica
Structured

modello economico da compilare

schema allegato obbligatorio

voci di costo richieste

regole di compilazione e vincoli

ribassi, sconti, percentuali

Mapping

“Offerta economica” ≈

“schema economico”, “lista prezzi”, “prospetto economico”.

Analysis

rischi di errore formale

coerenza tra elementi economici e tecnici

margini di miglioramento economico

14. Criteri e Punteggi
Structured

criteri di valutazione

sottocriteri

punteggi massimi

tipologia (discrezionale/quantitativa/mista)

formule e algoritmi di valutazione

soglia tecnica minima

Mapping

“Criteri” ≈

“griglia tecnica”, “criteri qualitativi”, “valutazione tecnica”, “fattori di punteggio”.

Analysis

criteri eccessivamente discrezionali

ambiguità interpretative

rischi di incertezza nella valutazione

15. Pena di Esclusione
Structured

cause esplicite di esclusione

condizioni implicite che determinano esclusione

errori formali critici

prescrizioni inderogabili

Mapping

"Comporta l’esclusione" ≈

“motivo di non ammissione”, “causa ostativa”, “determinano l’esclusione”.

Analysis

rischi reali di esclusione

errori più frequenti da evitare

elementi da segnalare al responsabile amministrativo

16. Note Importanti
Structured

avvertenze

note sparse

rinvii interni ed esterni

clausole particolari

Mapping

“Nota” ≈ “prescrizione”, “richiamo”, “avvertenza”.

Analysis

punti da evidenziare al team

impatti operativi o economici

collegamenti con altre sezioni del bando

17. Ambiguità e Chiarimenti
Structured

ambiguità testuali

incongruenze tra documenti

riferimenti normativi incerti

temi da sottoporre a chiarimento

Mapping

“Ambiguità” ≈

“zone grigie”, “contraddizioni”, “disallineamenti”, “punto non chiaro”.

Analysis

priorità dei quesiti da inviare

rischi se il chiarimento non viene richiesto

come formulare la domanda alla SA

“FORMATO OUTPUT – STRUTTURA DEL JSON PER OGNI SEZIONE”

La risposta finale deve essere sempre e solo un unico JSON completo, con tutte le sezioni previste dalla mia applicazione.  
Ogni sezione deve avere SEMPRE la struttura:

"NomeSezione": {
  "structured": { … },
  "analysis": { … }
}

Il modello NON deve mai aggiungere testo fuori dal JSON.

REGOLE GENERALI DI FORMATO:
- se un dato non è presente nel documento → lasciare campi vuoti ("", [], null)
- mai inventare valori
- ricostruire logicamente tabelle frammentate
- rispettare gerarchie (es. criteri → sottocriteri)
- mantenere la struttura JSON esatta, senza modificare i nomi dei campi

SEZIONI CON STRUTTURA SPECIFICA AVANZATA
----------------------------------------

1. Criteri e Punteggi
La sezione deve seguire SEMPRE la struttura:

"Criteri_Punteggi": {
  "structured": {
    "criteri": [
      {
        "nome_criterio": "",
        "punteggio_massimo": null,
        "tipologia_valutazione": "",
        "descrizione": "",
        "sottocriteri": [
          {
            "nome_sottocriterio": "",
            "punteggio_massimo": null,
            "tipologia_valutazione": "",
            "descrizione": "",
            "parametri_quantitativi": [],
            "parametri_qualitativi": []
          }
        ]
      }
    ],
    "metodologia_assegnazione_punteggi": "",
    "eventuali_formule_di_calcolo": [],
    "soglia_minima_tecnica": null
  },
  "analysis": {
    "criticita_nella_valutazione": "",
    "ambiguita_o_zone_grigie": "",
    "rischi_di_discrezionalita": "",
    "note_interpretative": ""
  }
}

I criteri devono essere sempre ricostruiti da tabelle anche se frammentate.  
Se un criterio non ha sottocriteri → restituire la lista vuota.

-----------------------------

2. SLA e Penali
Struttura richiesta:

"SLA_Penali": {
  "structured": {
    "elenco_sla": [],
    "elenco_kpi": [],
    "modalita_misurazione": "",
    "penali_elenco": [],
    "massimale_penali": "",
    "soglie_attivazione_penali": ""
  },
  "analysis": {
    "sla_critici": "",
    "penali_particolarmente_gravose": "",
    "zone_di_ambiguita": "",
    "note_su_sistema_di_controllo": ""
  }
}

Gli SLA devono essere estratti anche quando inseriti in tabelle, bullet list o paragrafi discorsivi.

-----------------------------

3. Requisiti di Partecipazione
Struttura obbligatoria:

"RequisitiPartecipazione": {
  "structured": {
    "requisiti_generali": [],
    "requisiti_economico_finanziari": [],
    "requisiti_tecnico_professionali": [],
    "certificazioni_obbligatorie": [],
    "altri_obblighi_di_legge": [],
    "note_documentali_richieste": []
  },
  "analysis": {
    "requisiti_restrittivi_o_limitanti": "",
    "rischi_di_esclusione": "",
    "ambiguita_nei_requisiti": "",
    "note_interpretative": ""
  }
}

Ricondurre sempre i requisiti anche se nominati in modo diverso (es. “requisiti mandatari”).

-----------------------------

4. Offerta Tecnica e Offerta Economica
Devono rispettare rigidamente le strutture JSON già definite nel megaprompt.  
Elenco puntuale, nessun testo discorsivo fuori JSON.

-----------------------------

5. Ambiguità e Chiarimenti
Estrarre SEMPRE:
- ambiguità esplicite
- contraddizioni
- rinvii non chiari
- punti da chiarire prima della presentazione dell’offerta

-----------------------------

REGOLE FINALI DI OUTPUT
- Restituisci SOLO il JSON completo.  
- Nessun markdown, nessuna spiegazione.  
- Nessun preambolo.  
- La risposta deve essere un unico blocco JSON valido.


